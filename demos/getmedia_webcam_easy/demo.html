<!DOCTYPE html>
<html lang="en">

    <!--
        Curso HTML5 | Enero 2013
        autor.apellido@bbvaglobalnet.com
    
        Demo del API GetMedia de HTML5
    
        Fuentes originales:
        http://miteshmaheta.blogspot.com.es/2012/07/webcam-in-html5.html
    
    -->

    <head>
        <meta charset="utf-8" />
        <title>HTML5 Demo Courses</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <!-- Le styles -->
        <link href="../../assets/css/bootstrap.css" rel="stylesheet" />
        <link href="../../assets/css/bootstrap-marketing-demo.css" rel="stylesheet" />
        <link href="../../assets/css/bootstrap-responsive.css" rel="stylesheet" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <!-- Fav and touch icons -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../assets/ico/apple-touch-icon-144-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../assets/ico/apple-touch-icon-114-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../assets/ico/apple-touch-icon-72-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" href="../../assets/ico/apple-touch-icon-57-precomposed.png" />
        <link rel="shortcut icon" href="../../assets/ico/favicon.png" />
    </head>
    <body>
        <!-- Top menu -------------------------------------------------------- -->
        <div class="container-narrow">
            <div class="masthead">
                <ul class="nav nav-pills pull-right">
                    <li><a href="../../index.html">Home</a></li>
                </ul>
                <h3 class="muted">getMedia easy</h3>
            </div>

            <hr />
            <!-- Center Logo ----------------------------------------------------- -->
            <div class="row-fluid">
                <video id="sourcevid" autoplay>Install browser's latest version.</video>
            </div>

            <hr />
            <!-- Footer ---------------------------------------------------------- -->
            <div class="footer">
                <p align="center"><img src="../../assets/img/beeva_logo.png" /></p>
            </div>
        </div>
        <!-- /container -->
        <!-- Le javascript
                ================================================== -->
        <!-- Placed at the end of the document so the pages load faster 			-->

        <script type="text/javascript" language="javascript">
            video = document.getElementById('sourcevid');
            // Catch stream from the camera using getUserMedia. Syntax is different as per the borwser. for ex. webkitGetUserMedia - Chrome, mozGetUserMedia- Mozilla Firefox.
            navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||  navigator.mozGetUserMedia || navigator.msGetUserMedia;
            window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;
            // Check if browser supports or not.
            if (navigator.getUserMedia) {
                // specially used this syntax for chrome. Other browser supports {video:true,audio:true}
                var options = {video: true, toString: function(){return 'video';}};
                //Main method call to run webcam 
                navigator.getUserMedia(options, success, error);
                //If Media streaming is success, This function will called. 
                function success(stream) {
                    // Replace the source of the video element with the stream from the camera
                    video.src = window.URL.createObjectURL(stream) || stream;
                    video.play();
                    }
                    //If Media streaming is fail, This function will call.    
                    function error(error) {
                        console.error('An error occurred: [CODE ' + error.code + ']');
                        video.play();
                    }
                } 
                // When browser does not support getUserMedia.
                else { 
                    var errorMsg = '<p>Uh oh, it appears your browser doesn\'t support this feature.</p>';
                    document.querySelector('[role=main]').innerHTML = errorMsg;
                }
        </script> 
    </body>
</html>
